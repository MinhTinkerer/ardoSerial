<head>
    <script type="text/javascript">
        function scan(){
        document.getElementById('scanning').style.visibility="visible";
        //document.getElementById('noscanning').style.visibility="hidden";
        getFire();
        }
        function connect(){
        //alert('called connect ');
        var applet = document.getElementById('myapplet');
        var portslist= document.getElementById('ports');
        var rateslist= document.getElementById('baudrates');
        var port= portslist.options[portslist.selectedIndex].value;
        var rate= rateslist.options[rateslist.selectedIndex].value;
        //alert("overrideConnect('"+portslist.selectedIndex+"','"+rateslist.selectedIndex+"')");

        applet.overrideConnect(portslist.selectedIndex,rateslist.selectedIndex);
        }


        function flash(){

			var program =document.getElementById('program').value+"\0";
        var applet = document.getElementById('myapplet');
        var portslist= document.getElementById('ports');
        var port= portslist.options[portslist.selectedIndex].value;

        applet.flash(portslist.selectedIndex,program);

        }

        function getFire(){
        var applet = document.getElementById('myapplet');
        applet.init();

        var portslist= document.getElementById('ports');
        var rateslist= document.getElementById('baudrates');
        portsAvail=applet.getFire2().split(",");
        for (var i =0 ;i
        <portsAvail.length
        ;i++){
        portslist.options[i]=new Option(portsAvail[i],portsAvail[i],true,true);
        }
        ratesAvail=applet.getFireRates().split(",");
        for (var i =0 ;i
        <ratesAvail.length
        ;i++){
        rateslist.options[i]=new Option(ratesAvail[i],ratesAvail[i],true,true);
        }
        }
    </script>
</head>

<body>
<applet width="1" height="1" id="myapplet" style="visibility:hidden;"
        code="eu.amaxilatis.codebender.CodeBenderApplet.class"
        archive="./target/ardoSerial-0.1-jar-with-dependencies.jar">
</applet>

<form>
    <div id="noscanning" style="visibility:opaque;">
        <input type="button" onclick='scan()' value='Search for Arduino...'/>
    </div>
    <div id="scanning" style="visibility:hidden;">
        <input type="textarea" id="program">
        <input type="button" onclick='connect()' value='Connect..'/>
        <input type="button" onclick='flash()' value='flash...'/>
        <select id="ports">
            <option></option>
        </select>
        <select id="baudrates">

        </select>
    </div>
</form>
</body>
